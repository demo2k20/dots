#!/bin/sh

# Dependencies: file, devour, mpv, sxiv, zathura

# Determine the mime type of the file
TYPE=$(file --mime-type "$@" -bL)

# Open the file using the appropriate program
case "$TYPE" in
    video/* | image/gif)
        devour mpv --loop "$@"
        ;;
    audio/*)
        mpv --loop "$@"
        ;;
    image/png | image/jpeg)
        devour sxiv "$@"
        ;;
    application/pdf | application/postscript)
        devour zathura "$@"
        ;;
    *officedocument* | text/rtf | application/octet-stream)
        devour libreoffice "$@"
        ;;
    application/java-archive)
        devour java -jar "$@"
        ;;
    text/*)
        $EDITOR "$@"
        ;;
    *)
        printf "Don't know how to open '$@', attempting to use xdg-open...\n"
        xdg-open "$@"
        ;;
esac
