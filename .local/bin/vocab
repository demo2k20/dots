#!/bin/sh

# Dependencies: fzf, xclip

# Specify vocabulary file location
VOCABFILE="$HOME/.local/vocab"

# Arguments
# `-a`; ask for new word/phrase to add to the database
if [ "$1" = "-a" ]; then
    PHRASE=$(printf "" | fzf --print-query --prompt="New word/phrase: ")
    [ -z "$PHRASE" ] && exit 1
    MEANING=$(printf "" | fzf --print-query --prompt="Meaning of word/phrase: ")
    [ -z "$MEANING" ] && exit 1
    printf "$PHRASE - $MEANING\n" >> "$VOCABFILE" && exit 0

# `-p`; print the contents of the database
elif [ "$1" = "-p" ]; then
    cat "$VOCABFILE" && exit 0

# `-s`; search through the database and copy output to clipboard
elif [ "$1" = "-s" ]; then
    cat -s "$VOCABFILE" | fzf | tr -d '\n' | xclip -selection clipboard && exit 0
fi

# Else, print a random word/phrase with its meaning
[ -z "$1" ] && shuf -n 1 "$VOCABFILE"
